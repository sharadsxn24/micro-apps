var _page_config={},_iBeat_articleid=null,_iBeat_tag=null,_iBeat_catIds=null,_iBeat_url=null,_iBeat_type=null,_iBeat_action=null,_iBeat_cat=null,_iBeat_subcat=null,_iBeat_articledt=null,_iBeat_author=null,_iBeat_channel=null,_iBeat_field=null;times=window.times||{},times.mobile=window.times.mobile||{},times.mobile.ibeat={trim:function(a){return a.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},getIbeatInfo:function(c,b){_iBeat_articleid=c.attr("data-articlemsid"),_iBeat_tag=c.attr("data-tag"),_iBeat_catIds=c.attr("data-catid"),_iBeat_url="http://m.timesofindia.com/"+c.attr("data-articleseo")+"/"+b+"/"+_iBeat_articleid+".cms",_iBeat_url=escape(_iBeat_url),_iBeat_type=-1!=_iBeat_url.indexOf("articleshow")||-1!=_iBeat_url.indexOf("articleshow_new")?1:-1!=_iBeat_url.indexOf("videoshow")?2:3,_iBeat_action=1,_iBeat_cat=this.trim(c.attr("data-cat")),_iBeat_subcat=this.trim(c.attr("data-subcat")),_iBeat_articledt=c.attr("data-artdt"),_iBeat_author=c.attr("data-author"),_iBeat_channel=c.attr("data-channel"),_iBeat_field="isAPP=2",_page_config.host="timesofindia.indiatimes.com",_page_config.key="ae9d3286a3123c65177df0aa6088b6e7",_page_config.domain="timesofindia.indiatimes.com",_page_config.channel=_iBeat_channel,_page_config.action=_iBeat_action,_page_config.articleId=_iBeat_articleid,_page_config.contentType=_iBeat_type,_page_config.location=1,_page_config.cat=_iBeat_cat,_page_config.subcat=_iBeat_subcat,_page_config.contenttag=_iBeat_tag,_page_config.catIds=_iBeat_catIds,_page_config.articledt=_iBeat_articledt,_page_config.iBeatField=_iBeat_field,_page_config.author=_iBeat_author,window._pg_endpt=(new Date).getTime(),this.fireIbeat()
},fireIbeat:function(){iBeatPgTrend.init()},init:function(c,b){this.getIbeatInfo(c,b)}},$(document).ready(function(){});times=window.times||{};times.mobile=window.times.mobile||{};times.mobile.social={constants:{icon:{fb:".fb",twt:".twitter",gp:".gplus",lin:".linkedin",mail:".email",plus:".share",whatsapp:".whatsapp",message:".message",pinit:".pinit"},via:"timesofindia",url:{base:"http://timesofindia.indiatimes.com",fb:"http://www.facebook.com/sharer.php",gp:"https://plus.google.com/share?url=",lin:"https://www.linkedin.com/cws/share?url=",whatsapp1:"whatsapp://send?text=",message:"sms:"+(navigator.userAgent.toLowerCase().indexOf("iphone")!=-1?"&body=":"?body="),twt:"http://twitter.com/share?",pinit:"http://pinterest.com/pin/create/link/?url="},photoHost:"m.photos.timesofindia.com",baseHost:"timesofindia.indiatimes.com",openerName:"sharer",popUpSettings:"toolbar=0,status=0,width=626,height=436",utm:"&utm_campaign=toimobile&utm_medium=referral"},getHost:function(){var b=window.location.host;
if(b==this.constants.photoHost){return b}return this.constants.baseHost},getShareUrl:function(f){var d=this.getHost();var e=window.location.protocol+"//"+d+location.pathname;return e},openDialog:function(d){var c=d.settings?d.settings:this.constants.popUpSettings;window.open(d.url,d.name,c)},getShareTitle:function(){var d=$('meta[property="og:title"]');if(d){var c=d.attr("content");if(c){return c}}return document.title},share:function(s,B,p){var y=(B!=""&&B!=undefined)?B:this.getShareUrl(s.replace(".",""));
var z=this.getShareTitle();switch(s){case this.constants.icon.fb:var t="";if(B!=""&&B!=undefined){t=this.constants.url.fb+"?u="+B+"?utm_source="+s.replace(".","")+this.constants.utm}else{y+="?utm_source="+s.replace(".","")+this.constants.utm;t=this.constants.url.fb+"?u="+encodeURIComponent(y)+"&t="+encodeURIComponent(z)}this.openDialog({url:t,name:this.constants.openerName});return false;break;case this.constants.icon.twt:var B=y+"?utm_source="+s.replace(".","")+this.constants.utm;var x=(p!="")?p:z;
var C={text:encodeURIComponent(x.replace("|","-")),via:this.constants.via,url:encodeURIComponent(B)};y=this.constants.url.twt+decodeURIComponent($.param(C));this.openDialog({url:y,name:this.constants.openerName});break;case this.constants.icon.gp:if(B!=""&&B!=undefined){y=this.constants.url.gp+B}else{y=this.constants.url.gp+y}y+="?utm_source="+s.replace(".","")+this.constants.utm;this.openDialog({url:y,name:this.constants.openerName});return false;break;case this.constants.icon.lin:if(B!=""&&B!=undefined){y=this.constants.url.lin+B
}else{y=this.constants.url.lin+y}y+="?utm_source="+s.replace(".","")+encodeURIComponent(this.constants.utm);this.openDialog({url:y,name:this.constants.openerName});return false;break;case this.constants.icon.mail:var q=(y!="")?y:this.getShareUrl("email");q+="?utm_source="+s.replace(".","")+this.constants.utm;var w="body="+encodeURIComponent(q);var x=(p!="")?p:z;y="mailto:?subject=TOI: "+x;window.location.href=y+"&"+w;break;case this.constants.icon.plus:var D=$("ul.more-social");var u="plus-share-icon-arrow";
if($("ul.more-social:visible").length>0){$("."+u).remove();D.hide()}else{var A=this.getArrowTopLeft();var r=this.getTopArrow({arrowClass:u,top:A.top,left:A.left});var v=this.getMoreSocialUlTopLeft(A,D);D.before(r).css(v).show()}break;case this.constants.icon.whatsapp:B+="?utm_source="+s.replace(".","")+this.constants.utm;var x=(p!="")?p:z;y=this.constants.url.whatsapp1+encodeURIComponent(x.replace(" - The Times of India on Mobile",""))+" - "+encodeURIComponent(B);window.location.href=y;break;case this.constants.icon.message:B+="?utm_source="+s.replace(".","");
var x=(p!="")?p:z;y=this.constants.url.message+encodeURIComponent(x.replace(" - The Times of India on Mobile",""))+" - "+encodeURIComponent(B);window.location.href=y;break;case this.constants.icon.pinit:B+="?utm_source="+s.replace(".","")+this.constants.utm;var x=(p!="")?p:z;y=this.constants.url.pinit+encodeURIComponent(x.replace(" - The Times of India on Mobile",""))+" - "+encodeURIComponent(B);this.openDialog({url:y,name:this.constants.openerName});return false;break}},shareMicron:function(k,u,n){var e=this.getShareTitle();
switch(k){case this.constants.icon.fb:var c=this.constants.url.fb+"?u="+encodeURIComponent(u)+"&t="+encodeURIComponent(e);this.openDialog({url:c,name:this.constants.openerName});return false;break;case this.constants.icon.twt:var g=(n!="")?n:e;var t={text:encodeURIComponent(g.replace("|","-")),via:this.constants.via,url:encodeURIComponent(u)};var l=this.constants.url.twt+decodeURIComponent($.param(t));this.openDialog({url:l,name:this.constants.openerName});break;case this.constants.icon.gp:var p=this.constants.url.gp+u;
this.openDialog({url:p,name:this.constants.openerName});return false;break;case this.constants.icon.lin:var s=this.constants.url.lin+u;this.openDialog({url:s,name:this.constants.openerName});return false;break;case this.constants.icon.mail:var a=u;var j="body="+encodeURIComponent(a);var g=(n!="")?n:e;var o="mailto:?subject=TOI: "+g;window.location.href=o+"&"+j;break;case this.constants.icon.plus:var r=$("ul.more-social");var m="plus-share-icon-arrow";if($("ul.more-social:visible").length>0){$("."+m).remove();
r.hide()}else{var i=this.getArrowTopLeft();var q=this.getTopArrow({arrowClass:m,top:i.top,left:i.left});var h=this.getMoreSocialUlTopLeft(i,r);r.before(q).css(h).show()}break;case this.constants.icon.whatsapp:var g=(n!="")?n:e;var d=this.constants.url.whatsapp1+encodeURIComponent(g.replace(" - The Times of India on Mobile",""))+" - "+encodeURIComponent(u);window.location.href=d;break;case this.constants.icon.message:var g=(n!="")?n:e;var b=this.constants.url.message+encodeURIComponent(g.replace(" - The Times of India on Mobile",""))+" - "+encodeURIComponent(u);
window.location.href=b;break;case this.constants.icon.pinit:var g=(n!="")?n:e;var f=this.constants.url.pinit+encodeURIComponent(g.replace(" - The Times of India on Mobile",""))+" - "+encodeURIComponent(u);this.openDialog({url:f,name:this.constants.openerName});return false;break}},getMoreSocialUlTopLeft:function(h,e){var f=h.top+4;var g=h.left-Math.ceil(e.width()/2);return{top:f,left:g,"z-index":1}},getArrowTopLeft:function(){var e=$("li.plus-share-icon");var f=e.width()/2-(2.5+3);var d=e.height()+1;
return{top:d,left:f}},getTopArrow:function(b){return $("<span></span>").addClass(b.arrowClass).css({"border-bottom":"5px solid #ccc","border-left":"5px solid transparent","border-right":"5px solid transparent",top:b.top,left:b.left,position:"absolute"})},updatePosition:function(){if($(".plus-share-icon-arrow:visible").length>0&&$("ul.more-social:visible").length>0){var c=this.getArrowTopLeft();$(".plus-share-icon-arrow").css(c);var d=$("ul.more-social");d.css(this.getMoreSocialUlTopLeft(c,d))}},attachEvents:function(b){if(b===true){times.mobile.social.updatePosition()
}else{$(window).resize(function(){times.mobile.social.updatePosition()})}},onClick:function(){$.each(this.constants.icon,function(c,d){$(document).on("click",".social-icons "+d+", .binder-social "+d,function(b){var h="."+$(this).attr("class").split(" ")[0];var g=($(this).attr("data-share-url")!=""&&$(this).attr("data-share-url")!=undefined)?$(this).attr("data-share-url"):$(this).attr("data-src");var a=($(this).attr("data-share-title")!=""&&$(this).attr("data-share-title")!=undefined)?$(this).attr("data-share-title"):"";
if(g&&g.indexOf("http://toi.in")!=-1){times.mobile.social.shareMicron(h,g,a)}else{times.mobile.social.share(h,g,a)}})})},iphonecheck:function(){if(navigator.userAgent.indexOf("OS 7_1_2")==-1){$(".social-icons ul li, .binder-social ul li").not(".mail_opera_only").removeClass("hide")}else{$(".social-icons ul li, .binder-social ul li").not(".msg,.mail_opera_only").removeClass("hide")}},scrollHandler:function(){var b=this;$(window).on("scroll",function(a){b.scrollfunc()})},scrollfunc:function(){var c=$(".idsocial").find(".social_links");
var d=c.next(".idsocial div.socialcont").find(".socialsharecont-radial");if(!times.mobile.utils.inViewSocial($(".idsocial .idviewsocial"))){d.addClass("radial-animate");setTimeout(function(){d.removeClass("slideanimation")},1000)}else{d.removeClass("radial-animate expanded opac")}},initonload:function(){this.iphonecheck();this.onClick();this.attachEvents(true);this.clickHandler();this.scrollfunc()},clickHandler:function(){$(".idsocial ul.icons").on("click",function(){$(this).parent(".socialsharecont-radial").toggleClass("expanded")
})},init:function(){this.iphonecheck();this.onClick();this.attachEvents(false);this.clickHandler();this.scrollHandler()}};times.mobile.social.init();times=window.times||{};times.mobile=window.times.mobile||{};times.mobile.videoResize={constants:{widthSel:".article-section",videoPlayerSel:"iframe[src^='http://player.vimeo.com'], iframe[src*='//www.youtube.com'], iframe[src^='http://timesofindia.indiatimes.com'], iframe[src^='//www.kaltura.com'], object, embed"},update:function(){var c=$(this.constants.videoPlayerSel),d=$(this.constants.widthSel);
c.each(function(){$(this).attr("data-aspectRatio",this.height/this.width).removeAttr("height").removeAttr("width")});$(window).resize(function(){var a=d.width();c.each(function(){var b=$(this);b.width(a).height(a*b.attr("data-aspectRatio"))})}).resize()}};times.mobile.videoResize.update();times=window.times||{};times.mobile=window.times.mobile||{};times.mobile.as={buytShownIDArr:{},ibeatArr:{},current:0,isNicOpen:false,constants:{slideConSel:".slider_container",nextImgSel:"div.nextimg",prevImgSel:"div.preimg",currPgSel:".currentPage",currPgParamSel:"input[name=curpg]",tpPgSel:"span.totalPage",imgSel:"div.imageBlock",visibleImgSel:"div.imageBlock:visible",msidSel:"input[name=imgId]",ajaxLoadingCls:"executing",url:{pgs:"/photogallery_slider.cms",ags:"/article_slider.cms"},loadImg:{contSel:"#ctyLoaderCont",cssSel:".story-article"},template:"data-included",showPage:"articleshow",captionSel:"div.caption",currnext:1,nxtstry:".keepscrolling",artlink:""},inView:function(e){var g=$(window);
var f={top:g.scrollTop(),left:g.scrollLeft()};f.right=f.left+g.width();f.bottom=f.top+g.height();var h=e.offset();return(!(f.right<h.left||f.bottom<h.top))},inViewSocial:function(k){var i=$(window);var g={top:i.scrollTop(),left:i.scrollLeft()};g.right=g.left+i.width();g.bottom=g.top+i.height();var h=k.outerHeight();var l=k.outerWidth();if(!l||!h){return false}var j=k.offset();j.right=j.left+l;j.bottom=j.top+h;return(!(g.right<j.left||g.top>j.bottom||g.left>j.right||g.bottom<j.top))},init:function(){var g;
$(window).on("scroll",function(a){if(times.mobile.as.isNicOpen==true){return false}if(g){clearTimeout(g)}g=setTimeout(function(){var k={};k.as=$("[data-articlemsid]");k.msid=window.msid;k.as.each(function(m,i){var n=$(i);var l=n.data("articlemsid");if(times.mobile.as.inView(n)){k.title=n.find("[data-article-title]").text()+" - Times of India";k.seo=n.data("articleseo");k.link="/";if(window.msid!=l){if(k.seo&&k.seo.length>0){k.link+=k.seo+"/"}window.msid=l;k.link+="articleshow/"+window.msid+".cms";
var j=n.find(".metatitle").attr("data-meta-title");$('meta[property="og:title"]').attr("content",j)}}});if(k.msid!=window.msid){try{document.getElementsByTagName("title")[0].innerHTML=k.title}catch(u){times.mobile.utils.log("Cannot update Title Tag on Scroll")}try{times.mobile.videoplayer.pauseVideoOfPrevArticle(k.msid)}catch(u){times.mobile.utils.log("Cannot pause videos of previous article-"+k.msid)}try{window.history.replaceState({},k.title,k.link);times.mobile.as.constants.artlink=k.link;var A=$(this).scrollTop();
times.mobile.as.current=A;ga("send",{hitType:"pageview",page:k.link,location:times.mobile.as.getHistoryAsUrl(k.link)});times.mobile.utils.loadComScore();var z=times.mobile.as.getAuthorName(window.msid);times.mobile.utils.fireChartBeat(k.link,k.title,z)}catch(u){times.mobile.utils.log("Cannot replace state of URL")}}var b=$("[data-articlemsid='"+window.msid+"']").find(".social_links");var v=$("[data-msid='"+window.msid+"']").attr("data-nextmsid");var d=$("[data-nextmsid='"+window.msid+"']").attr("data-msid");
var t=$(".articlepage").index($("[data-articlemsid='"+window.msid+"']"));var c=$(".articlepage").eq(t-1);var w=$("[data-articlemsid]").length;for(var y=0;y<=w-1;y++){if(y!=t){var x=$(".articlepage").eq(y).find(".social_links");x.next("div.socialcont").find(".socialsharecont-radial").removeClass("radial-animate expanded opac123")}}if(!times.mobile.as.inViewSocial(b.find("ul"))){b.next("div.socialcont").find(".socialsharecont-radial").addClass("opac123 radial-animate");setTimeout(function(){b.next("div.socialcont").find(".socialsharecont-radial").removeClass("slideanimation")
},1000)}else{b.next("div.socialcont").find(".socialsharecont-radial").removeClass("radial-animate expanded opac")}$(window).trigger("checkscroll")},100)});$(window).on("checkscroll",function(){times.mobile.as.scrollcheck()});times.mobile.as.socialsharingHandler();times.mobile.as.fontsizing();times.mobile.as.timestamp(window.msid);var f=$("[data-articlemsid='"+window.msid+"']");var h=f.find(this.constants.nextImgSel);var e=f.find(this.constants.prevImgSel);$(h).on("click",function(a){times.mobile.as.nextImgClick($(this),f)
});$(e).on("click",function(a){times.mobile.as.prevImgClick(f,$(this))});times.mobile.as.attachCTNEvents();$(document).on("click","a.newsincontext",function(){times.mobile.as.newsInContext($(this))});$(document).on("click",".niccontent button",function(){times.mobile.as.closeNICOverLay()});$("#ifrm-nic").load(function(){$("#newsincontext img").addClass("hide");$("#newsincontext .nic_overlay").removeClass("hide");$("#newsincontext #ifrm-nic").removeClass("hide").css({width:"100%"})})},getAuthorName:function(b){return $("[data-articlemsid="+b+"]").attr("data-author")
},getnextnonoverride:function(f,e){var d=f.data("override");if(d){f=$("[data-articleno='next_"+(e+1)+"']");if(f.length>0){f=this.getnextnonoverride(f,e+1)}}return f},getPageName:function(){var c={articleshow:"as",articleshow_mini:"as_mini",def:"as"};var d=$("#pageName").val();return c[d]?c[d]:c.def},scrollcheck:function(){var n=$("[data-articleshowajax-status='false']:first");var l=$("[data-articlepage-end='false']:first");var m=$("[data-articleno='next_"+times.mobile.as.constants.currnext+"']");
var g=this.getnextnonoverride(m,times.mobile.as.constants.currnext);if(times.mobile.as.inView(n)&&n.length==1&&g.length!=0){n.attr("data-articleshowajax-status","loading");var h=g.data("nextmsid");times.mobile.as.constants.currnext=parseInt(g.data("articleno").substring(5));times.mobile.as.constants.currnext++;var i,j;try{j=window.sessionStorage.readmore;i=sessionStorage.astextsize}catch(l){}window._pg_startpt=(new Date()).getTime();$.ajax({url:"/articleshowajax/"+h+".cms?pgname="+this.getPageName()+"&texttype="+i+"&session="+j,cache:true,statusCode:{404:function(){$("[data-articlemsid='"+window.msid+"']").find(".loadingnext").text("Page not found!").css("color","#fff")
}},success:function(t){times.mobile.as.topcommnets(h);$(".loadingnext").slideUp(1500);var b=$("[data-articleno='next_"+times.mobile.as.constants.currnext+"']");var d=times.mobile.as.getnextnonoverride(b,times.mobile.as.constants.currnext);if(d.length>0){var s=d.data("nextmsid");var a=d.data("title")}$("#ajaxcontent").append(t);var c=$("[data-articlemsid='"+h+"']").find(times.mobile.as.constants.nxtstry);if(d.length>0){c.attr("data-nxtmsid",s);c.find("a").text(a)}if(d.length==0){$(".loadingnext").hide();
c.hide()}times.mobile.ibeat.init($("[data-articlemsid='"+h+"']"),"articleshow_new");var r=$("[data-articlemsid='"+h+"']");times.mobile.as.timestamp(h);$.each(times.mobile.social.constants.icon,function(e,k){r.find(".social-icons").on("click",k,function(o){var p="."+$(this).attr("class").split(" ")[0];var w=$(this).attr("data-src");if(w&&w.indexOf("http://toi.in")!=-1){times.mobile.social.shareMicron(p,w)}else{times.mobile.social.share(p,w)}})});times.mobile.videoResize.update();twttr.widgets.load();
var u=r.find(times.mobile.as.constants.nextImgSel);var q=r.find(times.mobile.as.constants.prevImgSel);$(u).on("click",function(e){times.mobile.as.nextImgClick($(this),r)});$(q).on("click",function(e){times.mobile.as.prevImgClick(r,$(this))});n.attr("data-articleshowajax-status","loaded");times.mobile.lazyLoad(window,document).start();times.mobile.as.loadAds(r);if(j=="clicked"){$("div.caption").show();$(".showcaplink").addClass("rotate");$(".showcap").addClass("hide");$(".hidecap").removeClass("hide");
try{sessionStorage.readmore="clicked"}catch(v){}}$("#ajaxcontent").find(".seeallcomment").click(function(){try{sessionStorage.cmntclick="seeallcomment"}catch(k){}});try{times.mobile.social.iphonecheck()}catch(v){times.mobile.utils.log("Cannot show social share icons for the article-"+h)}try{times.mobile.videoplayer.init({msid:h})}catch(f){times.mobile.utils.log("Cannot Initiate Video Player for the article-"+h)}try{if(typeof(section_name)=="string"&&section_name.toLowerCase()=="tech"){times.mobile.utils.log("Rendering Indiatimes Shopping Widget!");
times.mobile.shopping.init()}}catch(f){times.mobile.utils.log("Cannot Initiate Indiatimes Shopping Widget for the article-"+h)}}})}},timestamp:function(g){var q=$("[data-articlemsid='"+g+"']").find("span.news-source");var v=q.text();var D,z,B;if(v.indexOf("|")>-1){var y=q.split("|");v=y[1];var C=v.substr(-4,4);z=v.replace(C,"").replace(".",":");B=times.mobile.as.dateformat(z)}else{if(v.indexOf(":")>-1){var C=v.substr(-4,4);var w=v.replace(C,"");z=w.replace("IST","");var u=z.split(" ");u.splice(3,0,C);
B=u.join(" ")}else{var A=v;var C=A.substr(-4,4);z=A.replace(C,"").replace(".",":");B=times.mobile.as.dateformat(z)}}D=new Date(B);var r=times.mobile.serverTime;var x=(r-D);var s=(x%86400000)/3600000;if(s>1){s=Math.round(s)}var t=Math.round(((x%86400000)%3600000)/60000);if(x>=86400000||s==0){$(q).text(A)}else{if(s>1){$(q).text(s+" hours ago")}else{if(s==1){$(q).text(s+" hour ago")}else{if(s<1){$(q).text(t+" mins ago")}else{$(q).text(A)}}}}},dateformat:function(g){if(g!=""){var h=g.split(",");var d=h[2].split(":");
if(h[2].indexOf("PM")>-1){if((parseInt(d[0])>0)&&(parseInt(d[0])<12)){d[0]=parseInt(d[0])+12}else{if(parseInt(d[0])==0){d[0]=24}else{d[0]=parseInt(d[0])}}}else{if(d[0].indexOf("12")>-1){d[0]=0}}h[2]=d.join(":");var f=h.join(",");if(h[2].indexOf("PM")>-1){return f.replace("PM","")}else{return f.replace("AM","")}}},prevImgClick:function(k,o){var l=o.parents(this.constants.visibleImgSel);var p=parseInt(l.parent().find(this.constants.currPgSel).text());var i=k.data("articleseo");var j=l.find("img.myimg").attr("msid");
if(p<=1){}else{var n=l;var m=n.prev();if(m&&m.length>0){n.hide();m.show();l.parent().find(this.constants.currPgSel).text(--p);this.updateGaHistoryData(k,p,i,j);if(p==1){m.find(this.constants.prevImgSel).hide()}}}},nextImgClick:function(q,v){var o=q.parents(this.constants.visibleImgSel);var p=o.next();var s=o.parent().find(this.constants.currPgSel);var y=parseInt(s.text());var r=parseInt(o.parent().find(this.constants.tpPgSel).text());var B=v.data("articleseo");var t=o.parent().find(this.constants.msidSel).val();
if(p&&p.length>0){o.hide();p.show();p.find(this.constants.prevImgSel).show();s.text(++y);this.updateGaHistoryData(v,y,B,t);if(y==r){p.find(this.constants.nextImgSel).hide()}}else{var x=parseInt(s.text());if(x<r){if(q.hasClass(this.constants.ajaxLoadingCls)){return}else{q.addClass(this.constants.ajaxLoadingCls)}var z=y/5;z++;var u;try{u=window.sessionStorage.readmore}catch(x){}var w=o.parent().data("hostid");var A=this.getRequestUrl()+"?"+this.getRequestParameters({curpg:z,hostid:w,msid:t,showfirst:"y",pgname:"as",session:u});
this.updatePhotoBg(q);v.find(this.constants.visibleImgSel).find(".navImgContainer").append("<div class='sliding'></div>");v.find(".sliding").addClass("sliderloadimg");$.ajax({url:A,dataType:"html",success:function(a,b,h){v.find(".sliderloadimg").hide();var d=$(a);var c=d.find(times.mobile.as.constants.imgSel);var i=d.find(times.mobile.as.constants.nextImgSel);$.each(i,function(e,j){$(j).click(function(k){times.mobile.as.nextImgClick($(this),v)})});var f=d.find(times.mobile.as.constants.prevImgSel);
$.each(f,function(e,j){$(j).click(function(k){times.mobile.as.prevImgClick(v,$(this))}).show()});if(c&&c.length>0){o.hide();s.text(++y);o.parent(times.mobile.as.constants.slideConSel).append(c);q.removeClass(times.mobile.as.constants.ajaxLoadingCls);times.mobile.as.updateGaHistoryData(v,y,B,t)}v.find(times.mobile.as.constants.loadImg.contSel).hide();if(u=="clicked"){$("div.caption").show();$(".showcaplink").addClass("rotate");$(".showcap").addClass("hide");$(".hidecap").removeClass("hide");try{sessionStorage.readmore="clicked"
}catch(g){}}times.mobile.as.captionclick()},error:function(c,b,a){v.find(times.mobile.as.constants.loadImg.contSel).hide()}})}}},updateGaHistoryData:function(i,l,g,h){var j=i.find(this.constants.slideConSel).attr("data-url-update");if(j=="yes"){var k=i.find(this.constants.slideConSel).attr(this.constants.template);times.mobile.utils.updatePageViews({stateObj:{},title:document.title,url:this.getHistoryUrl(k,l,g,h),updateUrl:"y",callback:function(){}})}else{times.mobile.utils.updateUrl(this.getUrlUpateParams(l))
}ga("send",{hitType:"pageview",page:this.getHistoryUrl(i.find(this.constants.slideConSel).attr(this.constants.template),l,g,h),location:times.mobile.as.getHistoryAsUrl(times.mobile.as.constants.artlink)});times.mobile.utils.loadComScore()},getHistoryUrl:function(m,i,n,h){var j=document.location.protocol;var l=document.location.host;var k="#slide"+i;return j+"//"+l+"/"+n+"/"+m+"/"+h+".cms"},getRequestUrl:function(){var b=$(this.constants.slideConSel).attr("data-frm");return this.constants.url[b]},getRequestParameters:function(b){return decodeURIComponent($.param(b))
},updatePhotoBg:function(e){var g=e.parents(this.constants.loadImg.cssSel);var h=g.height();var f=g.width();$(this.constants.loadImg.contSel).css({height:h,width:f}).show()},getUrlUpateParams:function(b){return{hash:"slide"+b}},loadAds:function(d){var f=d.attr("data-article-adsec");var e=d.attr("data-articlemsid");$.ajax({url:"/ads.cms?feedtype=json&msid="+f,dataType:"json",success:function(p){times.mobile.ads.adData=p;var s=new Array();if(typeof(_ccaud)!="undefined"){for(var o=0;o<_ccaud.Profile.Audiences.Audience.length;
o++){if(o<200){s.push(_ccaud.Profile.Audiences.Audience[o].abbr)}}}var a="";var r="";try{r=(typeof hasAdultContent!="undefined"&&hasAdultContent=="y")?"strong":""}catch(c){times.mobile.utils.log("Err happened while loading ads in perpetual scroll..")}var q="";var i="";var b=function(g){if(typeof(g)=="undefined"){return""}if(g.length>100){return g.substr(0,100)}return g};if(times.mobile.ads&&typeof times.mobile.ads.setCriteoTargeting=="function"){times.mobile.ads.setCriteoTargeting()}$.each(times.mobile.ads.adData.dfp.slots,function(j,h){var g="div-gpt-"+j+"_"+e;
if($("#"+g).length!=0&&h.multipleAds=="true"){googletag.cmd.push(function(){if(times.mobile.ads.constants.inviewDFPAdCodes.indexOf(j)==-1||times.mobile.utils.inViewport1($("#"+g))){times.mobile.as.defineAdSlotsInview(h,g,s,b,a,r,q,i)}else{$(window).on("scroll.dfp-"+j+"-"+e,function(){if(times.mobile.utils.inViewport1($("#"+g))){$(window).off("scroll.dfp-"+j+"-"+e);times.mobile.as.defineAdSlotsInview(h,g,s,b,a,r,q,i)}})}})}if(j=="FBN"){try{googletag.pubads().refresh([times.mobile.ads.refreshAdSlots[j]])
}catch(h){times.mobile.utils.log("Cannot able to refresh FBN Ad")}}});times.mobile.ads.createAds(d,times.mobile.ads.constants.adTypes.CTN)},failure:function(a){if(console){times.mobile.utils.log(a)}}})},defineAdSlotsInview:function(u,c,v,j,h,t,s,l){var a=googletag.defineSlot(u.name,(u.size?u.size:times.mobile.ads.constants.defSlots),c).setTargeting("test","infinitescroll").setTargeting("sg",v).setTargeting("HDL",j(h)).setTargeting("ARC1",j(t)).setTargeting("Hyp1",j(s)).setTargeting("article",j(l)).addService(googletag.pubads());
var o;if(u.mlb&&u.mlb.length>0){o=googletag.sizeMapping();for(var b=0;b<u.mlb.length;b++){o=o.addSize(u.mlb[b][0],u.mlb[b][1])}a.defineSizeMapping(o.build())}googletag.display(c)},socialsharingHandler:function(){$(document).on("click","ul.icons",function(){$(this).parent(".socialsharecont-radial").toggleClass("expanded")})},fontsizing:function(){$("#container").on("click","#Aplus",function(){$(this).parents("#container").removeClass("smalltxt , defaulttxt").addClass("largetxt");$(".fontsizecont").find(".active").removeClass("active");
$(".fontsizecont").find("#Aplus").addClass("active");try{sessionStorage.astextsize="Aplus"}catch(a){}});$("#container").on("click","#Aminus",function(){$(this).parents("#container").removeClass("largetxt , defaulttxt").addClass("smalltxt");$(".fontsizecont").find(".active").removeClass("active");$(".fontsizecont").find("#Aminus").addClass("active");try{sessionStorage.astextsize="Aminus"}catch(a){}});$("#container").on("click","#Anormal",function(){$(this).parents("#container").removeClass("smalltxt , largetxt").addClass("defaulttxt");
$(".fontsizecont").find(".active").removeClass("active");$(".fontsizecont").find("#Anormal").addClass("active");try{sessionStorage.astextsize="Anormal"}catch(a){}});$("#container").on("click",".fontdisplay.first",function(){if($(this).parent(".txtsize").find(".fontsizecont").hasClass("showfonts")){$(this).parent(".txtsize").removeClass("showicon").find(".fontsizecont").removeClass("showfonts")}else{$(this).parent(".txtsize").addClass("showicon").find(".fontsizecont").addClass("showfonts")}});$("#container").on("click",".closeicon",function(){$(this).next(".fontsizecont").removeClass("showfonts").parent(".txtsize").removeClass("showicon")
})},socialclick:function(){$("#container").on("click",".sharebutton",function(){$(this).next(".social_links.liveblogSocial").addClass("showshare")});$("#container").on("click",".closesocial",function(){$(this).parents(".social_links ").removeClass("showshare")})},setfontcookie:function(){var b;try{b=sessionStorage.astextsize}catch(c){}if(typeof(b)!=="undefined"){$("#"+b).trigger("click");$(".fontsizecont").removeClass("showfonts");$(".txtsize").removeClass("showicon")}else{try{sessionStorage.astextsize="Aminus"
}catch(c){}}},scrollheader:function(){var b=$(window).scrollTop();$(window).scroll(function(){var a=$(window).scrollTop();if(a<100){$("header.header").removeClass("fixheader topmove");$(".socialcont").removeClass("socialSpace")}else{if(a>b){$("header.header").addClass("topmove");$("header.header").removeClass("fixheader");$(".socialcont").removeClass("socialSpace")}else{$("header.header").addClass("fixheader topmove").removeAttr("style");$(".socialcont").addClass("socialSpace")}}b=a})},followon:function(){var i=["followfb","followtwit","closefollow"];
for(var g=0;g<i.length;g++){var f;try{f=localStorage.getItem(i[g])}catch(h){f=null}f=(f!=null)?JSON.parse(f):null;if(f!=null){if(times.mobile.utils.dates.compare(new Date(),f.expiry)>=0){localStorage.removeItem(i[g])}}}var j=15*24*60*60*1000;$(".closefollow").on("click",function(){var a={data:"userclosed",expiry:times.mobile.utils.dates.addDays(new Date(),j)};try{localStorage.closefollow=JSON.stringify(a)}catch(a){}$(".stickyfollow").hide()});$(".twitfollowbtn").on("click",function(){var a={data:"done",expiry:times.mobile.utils.dates.addDays(new Date(),j)};
try{localStorage.followtwit=JSON.stringify(a);if(localStorage.followfb){$(".stickyfollow").hide()}else{$(this).hide()}}catch(a){}});$(".fbfollowbtn").on("click",function(){var a={data:"done",expiry:times.mobile.utils.dates.addDays(new Date(),j)};try{localStorage.followfb=JSON.stringify(a);if(localStorage.followtwit){$(".stickyfollow").hide()}else{$(this).hide()}}catch(a){}});try{if((localStorage.followfb&&localStorage.followtwit)||(localStorage.closefollow)){$(".stickyfollow").hide()}else{$(".stickyfollow").show()
}if(localStorage.followtwit){$(".twitfollowbtn").hide()}else{$(".twitfollowbtn").show()}if(localStorage.followfb){$(".fbfollowbtn").hide()}else{$(".fbfollowbtn").show()}}catch(h){}},expandcap:function(a){var d=$(a).closest("div.caption");if(a.innerHTML=="Read More"){d.find(".shortcap").hide();d.find(".fullcap").show()}else{d.find(".shortcap").show();d.find(".fullcap").hide()}},captionclick:function(){$("#container").on("click",".showcap",function(){var b=$(this).parents(".slider_container").find('input[name="imgId"]').val();
$(this).parents(".slider_container").find("div.caption").show();$(this).parents(".slider_container").find(".showcaplink").addClass("rotate");$(this).parents(".slider_container").find(".showcap").addClass("hide");$(this).parents(".slider_container").find(".hidecap").removeClass("hide");try{sessionStorage.setItem("readmore"+b,"clicked")}catch(c){}});$("#container").on("click",".hidecap",function(){var b=$(this).parents(".slider_container").find('input[name="imgId"]').val();$(this).parents(".slider_container").find("div.caption").hide();
$(this).parents(".slider_container").find(".showcaplink").removeClass("rotate");$(this).parents(".slider_container").find(".showcap").removeClass("hide");$(this).parents(".slider_container").find(".hidecap").addClass("hide");try{sessionStorage.removeItem("readmore"+b)}catch(c){}})},galloverlay:function(){$("#container").on("click",".gallfullicon",function(){$(this).parents(".gallsliderborder").toggleClass("fixedgallery");$(".showmoregall").toggleClass("hide");$("body").toggleClass("bodyoverflow");
$(".gallfullicon").toggleClass("close")})},topcommnets:function(b){$.ajax({url:"/commentsdata/"+b+".cms?curpg=1&pcode=toi-wap&appkey=TOI&sortcriteria=AgreeCount&commenttype=agree&order=asc&size=1&lastdeenid=123&after=true&withReward=true&pagenum=1",cache:true,statusCode:{404:function(){}},success:function(j){var g="upvalue-comment-"+b;var a="upvalue-user-"+b;var j=JSON.parse(j);var i=(typeof(j[1].user_detail)=="undefined")?j[1].A_D_N:j[1].user_detail.FL_N;var h=$("<div/>").html(j[1].C_T);$("[data-plugin='"+g+"']").html(h.text());
$("[data-plugin='"+a+"']").text(i);$("[data-plugin-count='"+b+"']").text(j[0].totalcount)}})},followinview:function(){isinview=false;$("#container .articleimg , #container .article-txt").each(function(c,d){if(times.mobile.as.inViewSocial($(d))){if(isinview===false){isinview=true}}if(isinview==false){$(".stickyfollow").css("bottom","0px")}else{$(".stickyfollow").css("bottom","-100px")}})},nextstoryhandler:function(){$("body").on("click",times.mobile.as.constants.nxtstry,function(){var b=$(this).attr("data-nxtmsid");
$(window).scrollTop($("[data-articlemsid='"+b+"']").offset().top)})},attachCTNEvents:function(){$(document).on("shown.times_mobile_ctn","[data-ctn-type]",function(){$(this).find(".id_ctn_show").fadeIn()})},getHistoryAsUrl:function(d){var f=document.location.protocol;var e=document.location.host;return f+"//"+e+d},newsInContext:function(a){this.isNicOpen=true;$("body").addClass("nicoverlay");var b=a.attr("id");$("[data-id='"+b+"']").addClass("niccontent").removeClass("forcehide")},closeNICOverLay:function(){$("#container").removeClass("overlayhide");
var a=$(".niccontent");var b=a.attr("data-id");a.addClass("forcehide").removeClass("niccontent");$("body").removeClass("nicoverlay");this.isNicOpen=false;this.resetListicleTweet(a)},resetListicleTweet:function(a){$(a).find("iframe[id *= 'twitter-widget']").remove();$(a).removeClass("sb_active").addClass("forcehide");setTimeout(function(){var b=$(a).find("[data-plugin='nic-twitter-frame']");$.each(b,function(d,c){var e="twt-"+$(b[d]).data("twtid");if(window.twttr){if($(b[d]).data("twtid")){twttr.widgets.createTweet($(b[d]).data("twtid"),document.getElementById(e),{theme:"light"})
}else{}}else{}})},0)}};times.mobile.as.init();$(document).ready(function(){try{sessionStorage.removeItem("readmore")}catch(a){}times.mobile.as.setfontcookie();times.mobile.as.scrollheader();times.mobile.as.nextstoryhandler();times.mobile.as.followon();times.mobile.as.galloverlay();times.mobile.as.captionclick();times.mobile.as.followinview();times.mobile.as.socialclick()});$(window).scroll(function(){times.mobile.as.followinview()});times=window.times||{};times.mobile=window.times.mobile||{};times.mobile.story={constants:{prevSel:"div.prev-navigation",nextSel:"div.next-navigation"},loadPage:function(b){window.location.href=b.find("a").attr("href")
},attachEvents:function(){$(this.constants.prevSel+","+this.constants.nextSel).click(function(b){times.mobile.story.loadPage($(this))})},topcommnets:function(b){$.ajax({url:"/commentsdata/"+b+".cms?curpg=1&pcode=toi-wap&appkey=TOI&sortcriteria=AgreeCount&commenttype=agree&order=asc&size=1&lastdeenid=123&after=true&withReward=true&pagenum=1",cache:true,statusCode:{404:function(){}},success:function(j){var g="upvalue-comment-"+b;var a="upvalue-user-"+b;var j=JSON.parse(j);var i=(typeof(j[1].user_detail)=="undefined")?j[1].A_D_N:j[1].user_detail.FL_N;
var h=$("<div/>").html(j[1].C_T);$("[data-plugin='"+g+"']").html(h.text());$("[data-plugin='"+a+"']").text(i);$("[data-plugin-count='"+b+"']").text(j[0].totalcount)}})},wrapfbquote:function(){var i=document.getElementsByTagName("blockquote").length;var h=false;if(i){for(var l=0;l<i;l++){var j=document.getElementsByTagName("blockquote")[l].getAttribute("cite");if(j&&j.indexOf("facebook")>-1){var g=$('blockquote[cite="'+j+'"]');var k=g.parent().parent().hasClass("fb-post");if(!k){h=true;$('blockquote[cite="'+j+'"]').parent().attr("data-subtype","facebook");
$('blockquote[cite="'+j+'"]').wrap('<div class="fb-post" data-href="'+j+'" data-width="500"><div class="fb-xfbml-parse-ignore">')}}}if(h){this.fbembdload()}}},fbembdload:function(){if(window.FB){FB.XFBML.parse()}else{(function(i,g,h){var j,d=i.getElementsByTagName(g)[0];if(i.getElementById(h)){return}j=i.createElement(g);j.id=h;j.src="//connect.facebook.net/en_US/all.js#xfbml=1&amp;appId=117787264903013";d.parentNode.insertBefore(j,d)}(document,"script","facebook-jssdk"))}}};var curmsid=(typeof(msid)=="number")?msid:msid.value;
times.mobile.story.attachEvents();times.mobile.story.topcommnets(curmsid);times.mobile.story.wrapfbquote();window.addEventListener("orientationchange",function(){setTimeout(function(){if(FB){FB.XFBML.parse()}},500)});